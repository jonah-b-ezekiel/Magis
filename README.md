Magis-100 DIS Github Repository

 - This repository was developed by Jonah Ezekiel (jezekiel@stanford.edu) on behalf of and with guidance from the SLAC MAGIS team to aid in the development and planning for the diagnostic imaging system for the MAGIS-100 experiment. This repository provides the functionality to trigger, modify internal variables of, and power cycle Flir Blackfly Model S cameras over software with the purpose of characterizing these cameras and developing and testing the system that will be used to interact with these cameras at the experiment. The planned layout is shown below:
 -
-    Ethernet
        |
- DC -- PI --(usb 3)--\      /--(usb 3)-- pi-controlled relay --(usb3)-- Cam 3 (Physics)
                      USB HUB --(usb 3)-- pi-controlled relay --(usb3)-- Cam 2 (Alignment)
- DC -----------------/      \--(usb 3)-- pi-controlled relay --(usb3)-- Cam 1 (Alignment)

Directory

- jupyter_notebook: workbooks used for analasys of data taken using camCharacterization script to characterizing cameras (data stored in Slac SDF), and workbook used for trigger study analasys of delay between trigger and camera GPIO output (data stored in trigger_study_data folder)
- lab_setup_images: Images of how the electronic components are / should be setup in the lab for interfacing with camera, camera GPIO output signal recieving, and gpio interfacing with relay to work. 
- plots: plots generated by jupyter_notebook file
- src: scripts for interacting with cameras, gpio, aquiring data, etc. "acquisitionFunc" demonstrates key functionality via a CLI. If new to this repository, try running this file first. "camCharacterizationDataAcquisition" was used for running custom scripts to aquire data for cam characterization studies. "camInputLogger" simply writes to the command line when the status of the input pin connected to the cameras GPIO output changes. "triggerDelayTesting" was used for acquiring data for the trigger delay studies, which includes setting up camera GPIO output and running functions in parrallel to trigger camera and log GPIO output. 
- trigger_study_data: CSV files with results from trigger study. The difference between the numbers in a given row tells you how many ticks of the pis clock occured between these events. As the pis clock ticks 1000000 times per second, this number corresponds to the number of us between events. 
- Makefiles: there are 4 makefiles, each with the ability to compile one of the scripts in src. The working method of compiling scripts has been to copy the correct makefile into the "Makefile" file. 

Notes

- Many of the scripts in this depository depend on the Spinnaker SDK API and the WiringPi library for GPIO use
- The current practice for compiling scripts in the src folder is to copy the corresponding "Makefile.{script name}" into the "Makefile" and then running make

Resources 

- Spinnaker SDK API User Manual: http://softwareservices.flir.com/Spinnaker/latest/examples.html
- Technical Reference for Camera: http://softwareservices.flir.com/BFS-U3-63S4/latest/Model/public/index.html?_ga=2.65493806.1496873635.1659466903-1933567677.1659466900&_gl=1*1rw8way*_ga*MTkzMzU2NzY3Ny4xNjU5NDY2OTAw*_ga_CYF2N4QDDM*MTY1OTQ2Njg5OC4xLjEuMTY1OTQ2Njk0NS4xOA..*_fplc*JTJGVCUyRiUyQlNrQ1BBVWhqOEttT0xSQnolMkJiaUpDM3gxdGNIQ2slMkJwQ3NHclkyUyUyQldrZGlQd0ZaWXJ3RXZjWTBEMUhYSXg5alFzN3EyZmdLWnJKWmZ4Z2xRMCUyQnpJUXZ0bWNlRlRvejVmckpDaHdISlprM2ZqQTFaZGYyWU1oa0RWOGclM0QlM0Q.
